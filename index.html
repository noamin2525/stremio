```html
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamHub - ××¨×›×– ×¡×˜×¨×™××™× ×’</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            background: linear-gradient(135deg, #a855f7 0%, #3b82f6 100%);
            padding: 0.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #c084fc 0%, #93c5fd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-input {
            width: 100%;
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid #374151;
            border-radius: 9999px;
            padding: 0.75rem 3rem;
            color: white;
            outline: none;
            transition: all 0.3s;
        }

        .search-input:focus {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            background: rgba(168, 85, 247, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: rgba(168, 85, 247, 0.4);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #a855f7;
        }

        .content-section {
            padding: 2rem 0;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        .content-card {
            background: #1f2937;
            border-radius: 1rem;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .content-card:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
        }

        .card-image-container {
            position: relative;
            aspect-ratio: 2/3;
            overflow: hidden;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .content-card:hover .card-image {
            transform: scale(1.1);
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            opacity: 0;
            transition: opacity 0.3s;
            display: flex;
            align-items: flex-end;
            padding: 1rem;
        }

        .content-card:hover .card-overlay {
            opacity: 1;
        }

        .watch-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #a855f7;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background 0.3s;
        }

        .watch-btn:hover {
            background: #9333ea;
        }

        .card-info {
            padding: 0.75rem;
        }

        .card-title {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 0.25rem;
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #9ca3af;
            font-size: 0.875rem;
        }

        .skeleton {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .skeleton-card {
            background: #374151;
            border-radius: 1rem;
            overflow: hidden;
        }

        .skeleton-image {
            aspect-ratio: 2/3;
            background: #4b5563;
        }

        .skeleton-text {
            height: 1rem;
            background: #4b5563;
            border-radius: 0.25rem;
            margin: 0.75rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .search-results {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: #1f2937;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            max-height: 400px;
            overflow-y: auto;
            z-index: 50;
        }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            border-bottom: 1px solid #374151;
            cursor: pointer;
            transition: background 0.3s;
        }

        .search-result-item:hover {
            background: rgba(55, 65, 81, 0.5);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-image {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 0.5rem;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .search-result-meta {
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .addon-card {
            background: #1f2937;
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid #374151;
            transition: all 0.3s;
        }

        .addon-card:hover {
            border-color: #a855f7;
            transform: translateY(-2px);
        }

        .addon-name {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #c084fc;
        }

        .addon-description {
            color: #9ca3af;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .addon-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .addon-btn {
            background: #a855f7;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            flex: 1;
            transition: background 0.3s;
            font-size: 0.875rem;
        }

        .addon-btn:hover {
            background: #9333ea;
        }

        .addon-btn.copy-btn {
            background: #3b82f6;
        }

        .addon-btn.copy-btn:hover {
            background: #2563eb;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(34, 197, 94, 0.95);
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            z-index: 10000;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }

            .search-container {
                order: 3;
                width: 100%;
                max-width: 100%;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 1rem;
            }

            .addons-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
                            <line x1="7" y1="2" x2="7" y2="22"></line>
                            <line x1="17" y1="2" x2="17" y2="22"></line>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                        </svg>
                    </div>
                    <span class="logo-text">StreamHub</span>
                </div>

                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="×—×¤×© ×¡×¨×˜×™×, ×¡×“×¨×•×ª, ×©×—×§× ×™×..."
                        id="searchInput"
                    >
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <div id="searchResults" class="search-results" style="display: none;"></div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn active" data-section="home">×‘×™×ª</button>
                    <button class="nav-btn" data-section="movies">×¡×¨×˜×™×</button>
                    <button class="nav-btn" data-section="tv">×¡×“×¨×•×ª</button>
                    <button class="nav-btn" data-section="addons">×ª×•×¡×¤×™×</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div id="homeSection" class="content-section">
            <div class="section-title">ğŸ”¥ ×¡×¨×˜×™× ×¤×•×¤×•×œ×¨×™×™×</div>
            <div id="moviesGrid" class="content-grid"></div>

            <div class="section-title" style="margin-top: 3rem;">ğŸ“º ×¡×“×¨×•×ª ×¤×•×¤×•×œ×¨×™×•×ª</div>
            <div id="tvGrid" class="content-grid"></div>
        </div>

        <div id="moviesSection" class="content-section" style="display: none;">
            <div class="section-title">ğŸ¬ ×›×œ ×”×¡×¨×˜×™×</div>
            <div id="allMoviesGrid" class="content-grid"></div>
        </div>

        <div id="tvSection" class="content-section" style="display: none;">
            <div class="section-title">ğŸ“º ×›×œ ×”×¡×“×¨×•×ª</div>
            <div id="allTvGrid" class="content-grid"></div>
        </div>

        <div id="addonsSection" class="content-section" style="display: none;">
            <div class="section-title">ğŸ”Œ ×ª×•×¡×¤×™ Stremio</div>
            <div style="background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.5); border-radius: 1rem; padding: 1rem; margin-bottom: 1.5rem;">
                <p style="font-weight: 600; margin-bottom: 0.5rem;">ğŸ’¡ ×”×•×¨××•×ª ×”×ª×§× ×”:</p>
                <p style="font-size: 0.875rem; color: #93c5fd;">1. ×¤×ª×— ××ª Stremio ×§×•×“×<br>2. ×œ×—×¥ ×¢×œ "×”×ª×§×Ÿ" ××• "×”×¢×ª×§ ×§×™×©×•×¨" ×•×”×“×‘×§ ×‘×ª×•×š Stremio ×‘×—×™×¤×•×©<br>3. ×× ×–×” ×œ× ×¢×•×‘×“ - ×”×¢×ª×§ ××ª ×”×§×™×©×•×¨ ×™×“× ×™×ª</p>
            </div>
            <div id="addonsGrid" class="addons-grid"></div>
        </div>
    </main>

    <script>
        const TMDB_API_KEY = '93f0d2ee2e3e60d061d14d91cbb47b46';
        const TMDB_BASE_URL = 'https://api.themoviedb.org/3';

        const ADDONS = [
            {
                name: 'Torrentio+ed',
                url: 'stremio://torrentio.strem.fun/easydebrid=n3cgfuzhg9ptzbss/manifest.json',
                description: '×¡×˜×¨×™××™× ×’ ×˜×•×¨× ×˜×™× ××ª×§×“× ×¢× ××™× ×˜×’×¨×¦×™×” ×©×œ EasyDebrid'
            },
            {
                name: 'Wizdom Subtitles',
                url: 'stremio://4b139a4b7f94-wizdom-stremio-v2.baby-beamup.club/manifest.json',
                description: '×›×ª×•×‘×™×•×ª ×¢×‘×¨×™×•×ª ××××’×¨ ×•×™×–×“×•×'
            },
            {
                name: 'Ktuvit Subtitles',
                url: 'stremio://4b139a4b7f94-ktuvit-stremio.baby-beamup.club/manifest.json',
                description: '×›×ª×•×‘×™×•×ª ×¢×‘×¨×™×•×ª ××××’×¨ ×›×ª×•×‘×™×ª'
            },
            {
                name: 'Movie Release Dates',
                url: 'stremio://stremio7rd-movies-online-dates.vercel.app/manifest.json',
                description: '××¢×§×‘ ××—×¨ ×ª××¨×™×›×™ ×™×¦×™××” ×©×œ ×¡×¨×˜×™× ×—×“×©×™×'
            },
            {
                name: 'TMDB Hebrew Posters',
                url: 'stremio://94c8cb9f702d-tmdb-addon.baby-beamup.club/N4IgNghgdg5grhGBTEAuEALJBaAkgGRABoQBnAFwCckIBbAS1jQG0BdEgYwnIjAHsYpFqHoATNCHK1RAIwB05PgAdikgJ5KU6WnwBu9FCSh0tIAArK4kSqtIY+Ad1xQAEn1paqcJAF8iI8XQpWQVlVXINU1IkSgMhIxMJCyUrCBsSO0dnNw80L19-EDEJYPk1GnT1TQkdfUMQY1z0AE0K23snV3dPSm8-AJLpMraSCOr0aNikeIbElpGyDuzuvN6CgaChuUhYBGRwyJq9A1VG03xoeER6zM6cnr7C4s2Qnav90cOJmLjTuZALrtru0sl0mvl+kVApItlQkFBRIwYAdxiBaicEk0QAAVagIpEgu4rVAQp7Q0oKPGIpifVGTX6Y0y4+HU5EZJZgh6+dggLgUADCfDgUHIaAArD4gA/manifest.json',
                description: '×¤×•×¡×˜×¨×™× ×¢×‘×¨×™×™× ×•×—×™×¤×•×© ×ª×•×›×Ÿ'
            },
            {
                name: '×¢×¨×•×¦×™× ×—×™×™× ×•×ª×•×›×Ÿ ×™×©×¨××œ×™',
                url: 'stremio://xtremiob.vercel.app:/eyJCYXNlVVJMIjoiaHR0cHM6Ly94dHJlYW0taWUuY2MiLCJ1c2VybmFtZSI6InN0cmVtaW9lZGlsMjUiLCJwYXNzd29yZCI6IlNzMjAyNSIsIm5hbWUiOiJJTCIsImxhbmciOiJoZS1JTCIsImVuY3J5cHRlZCI6ZmFsc2V9/manifest.json',
                description: 'ğŸ“º ×¢×¨×•×¦×™ ×˜×œ×•×•×™×–×™×” ×™×©×¨××œ×™×™× ×œ×¦×¤×™×™×” ×—×™×”, ×¡×“×¨×•×ª ×™×©×¨××œ×™×•×ª, ×ª×•×›×Ÿ ××“×•×‘×‘ ×•-VOD'
            }
        ];

        let searchTimeout;

        document.addEventListener('DOMContentLoaded', () => {
            fetchPopularContent();
            setupEventListeners();
            renderAddons();
        });

        function setupEventListeners() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    switchSection(e.target.dataset.section);
                });
            });

            document.getElementById('searchInput').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => handleSearch(e.target.value), 300);
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    document.getElementById('searchResults').style.display = 'none';
                }
            });
        }

        function switchSection(section) {
            document.querySelectorAll('.content-section').forEach(s => s.style.display = 'none');
            
            switch(section) {
                case 'home':
                    document.getElementById('homeSection').style.display = 'block';
                    break;
                case 'movies':
                    document.getElementById('moviesSection').style.display = 'block';
                    fetchAllMovies();
                    break;
                case 'tv':
                    document.getElementById('tvSection').style.display = 'block';
                    fetchAllTv();
                    break;
                case 'addons':
                    document.getElementById('addonsSection').style.display = 'block';
                    break;
            }
        }

        async function fetchPopularContent() {
            showSkeletons('moviesGrid', 10);
            showSkeletons('tvGrid', 10);

            try {
                const [moviesRes, tvRes] = await Promise.all([
                    fetch(`${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`),
                    fetch(`${TMDB_BASE_URL}/tv/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`)
                ]);

                const moviesData = await moviesRes.json();
                const tvData = await tvRes.json();

                renderContent(moviesData.results.slice(0, 10), 'moviesGrid', 'movie');
                renderContent(tvData.results.slice(0, 10), 'tvGrid', 'tv');
            } catch (error) {
                console.error('Error fetching content:', error);
            }
        }

        async function fetchAllMovies() {
            const grid = document.getElementById('allMoviesGrid');
            if (grid.children.length > 0) return;

            showSkeletons('allMoviesGrid', 20);

            try {
                const res = await fetch(`${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`);
                const data = await res.json();
                renderContent(data.results, 'allMoviesGrid', 'movie');
            } catch (error) {
                console.error('Error fetching movies:', error);
            }
        }

        async function fetchAllTv() {
            const grid = document.getElementById('allTvGrid');
            if (grid.children.length > 0) return;

            showSkeletons('allTvGrid', 20);

            try {
                const res = await fetch(`${TMDB_BASE_URL}/tv/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`);
                const data = await res.json();
                renderContent(data.results, 'allTvGrid', 'tv');
            } catch (error) {
                console.error('Error fetching TV shows:', error);
            }
        }

        async function handleSearch(query) {
            const resultsDiv = document.getElementById('searchResults');
            
            if (!query.trim()) {
                resultsDiv.style.display = 'none';
                return;
            }

            try {
                const res = await fetch(
                    `${TMDB_BASE_URL}/search/multi?api_key=${TMDB_API_KEY}&language=he-IL&query=${encodeURIComponent(query)}`
                );
                const data = await res.json();
                
                if (data.results.length > 0) {
                    renderSearchResults(data.results.slice(0, 8));
                    resultsDiv.style.display = 'block';
                } else {
                    resultsDiv.style.display = 'none';
                }
            } catch (error) {
                console.error('Search error:', error);
                resultsDiv.style.display = 'none';
            }
        }

        function renderSearchResults(results) {
            const resultsDiv = document.getElementById('searchResults');
            
            const filteredResults = results.filter(item => 
                item.media_type === 'movie' || item.media_type === 'tv'
            );
            
            resultsDiv.innerHTML = filteredResults.map(item => {
                const isMovie = item.media_type === 'movie';
                const title = isMovie ? item.title : item.name;
                const year = isMovie ? item.release_date : item.first_air_date;
                const posterPath = item.poster_path 
                    ? `https://image.tmdb.org/t/p/w200${item.poster_path}`
                    : 'https://placehold.co/50x75/1f2937/9ca3af?text=?';

                const type = isMovie ? 'movie' : 'tv';

                return `
                    <div class="search-result-item" onclick="openStremio('${item.id}', '${type}')">
                        <img src="${posterPath}" alt="${title}" class="search-result-image">
                        <div class="search-result-info">
                            <div class="search-result-title">${title}</div>
                            <div class="search-result-meta">
                                ${item.media_type === 'movie' ? 'ğŸ¬ ×¡×¨×˜' : 'ğŸ“º ×¡×“×¨×”'} 
                                ${year ? 'â€¢ ' + new Date(year).getFullYear() : ''}
                                ${item.vote_average ? 'â€¢ â­ ' + item.vote_average.toFixed(1) : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderContent(items, gridId, type) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = items.map(item => {
                const isMovie = type === 'movie' || item.title;
                const title = isMovie ? item.title : item.name;
                const releaseDate = isMovie ? item.release_date : item.first_air_date;
                const posterPath = item.poster_path 
                    ? `https://image.tmdb.org/t/p/w500${item.poster_path}`
                    : 'https://placehold.co/500x750/1f2937/9ca3af?text=No+Image';

                const contentType = isMovie ? 'movie' : 'tv';

                return `
                    <div class="content-card">
                        <div class="card-image-container">
                            <img src="${posterPath}" alt="${title}" class="card-image" loading="lazy">
                            <div class="card-overlay">
                                <button class="watch-btn" onclick="openStremio('${item.id}', '${contentType}')">
                                    â–¶ ×¦×¤×” ×‘-Stremio
                                </button>
                            </div>
                        </div>
                        <div class="card-info">
                            <div class="card-title">${title}</div>
                            <div class="card-meta">
                                <span>â­ ${item.vote_average?.toFixed(1) || 'N/A'}</span>
                                ${releaseDate ? `<span>â€¢</span><span>${new Date(releaseDate).getFullYear()}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showSkeletons(gridId, count) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = Array(count).fill(0).map(() => `
                <div class="skeleton-card skeleton">
                    <div class="skeleton-image"></div>
                    <div class="skeleton-text" style="width: 75%;"></div>
                    <div class="skeleton-text" style="width: 50%;"></div>
                </div>
            `).join('');
        }

        function renderAddons() {
            const grid = document.getElementById('addonsGrid');
            grid.innerHTML = ADDONS.map(addon => `
                <div class="addon-card">
                    <div class="addon-name">${addon.name}</div>
                    <div class="addon-description">${addon.description}</div>
                    <div class="addon-buttons">
                        <button class="addon-btn" onclick="installAddon('${addon.url}')">
                            ×”×ª×§×Ÿ ×ª×•×¡×£
                        </button>
                        <button class="addon-btn copy-btn" onclick="copyAddonLink('${addon.url}')">
                            ğŸ“‹ ×”×¢×ª×§ ×§×™×©×•×¨
                        </button>
                    </div>
                </div>
            `).join('');
        }

        async function openStremio(tmdbId, type) {
            try {
                const loadingMsg = document.createElement('div');
                loadingMsg.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(168, 85, 247, 0.95);
                    color: white;
                    padding: 1rem 2rem;
                    border-radius: 1rem;
                    z-index: 9999;
                    font-weight: 600;
                    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
                `;
                loadingMsg.textContent = 'â³ ×˜×•×¢×Ÿ...';
                document.body.appendChild(loadingMsg);

                const response = await fetch(
                    `${TMDB_BASE_URL}/${type}/${tmdbId}/external_ids?api_key=${TMDB_API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('Failed to fetch IMDB ID');
                }
                
                const data = await response.json();
                const imdbId = data.imdb_id;

                document.body.removeChild(loadingMsg);

                if (!imdbId) {
                    alert('âš ï¸ ×œ× × ××¦× IMDB ID ×¢×‘×•×¨ ×ª×•×›×Ÿ ×–×”');
                    return;
                }

                const stremioType = type === 'tv' ? 'series' : 'movie';
                const stremioUrl = `stremio://detail/${stremioType}/${imdbId}`;
                
                console.log('Opening Stremio:', stremioUrl);
                
                window.location.href = stremioUrl;
                
                setTimeout(() => {
                    if (!document.hidden) {
                        showToast('ğŸ’¡ ×× Stremio ×œ× × ×¤×ª×—, ×¤×ª×— ××•×ª×• ×™×“× ×™×ª ×•× ×¡×” ×©×•×‘');
                    }
                }, 1000);

                document.getElementById('searchResults').style.display = 'none';
                document.getElementById('searchInput').value = '';

            } catch (error) {
                console.error('Error opening Stremio:', error);
                
                const loadingMsg = document.querySelector('[style*="position: fixed"]');
                if (loadingMsg && loadingMsg.textContent === 'â³ ×˜×•×¢×Ÿ...') {
                    loadingMsg.remove();
                }
                
                alert('âŒ ××™×¨×¢×” ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×ª×•×›×Ÿ. ×× × × ×¡×” ×©×•×‘.');
            }
        }

        function installAddon(url) {
            window.location.href = url;
            
            setTimeout(() => {
                if (!document.hidden) {
                    showToast('ğŸ’¡ ×¤×ª×— ××ª Stremio ×§×•×“× ×•× ×¡×” ×©×•×‘, ××• ×œ×—×¥ ×¢×œ "×”×¢×ª×§ ×§×™×©×•×¨"');
                }
            }, 1000);
        }

        async function copyAddonLink(url) {
            try {
                await navigator.clipboard.writeText(url);
                showToast('âœ… ×”×§×™×©×•×¨ ×”×•×¢×ª×§! ×”×“×‘×§ ××•×ª×• ×‘×ª×•×š Stremio');
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = url;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast('âœ… ×”×§×™×©×•×¨ ×”×•×¢×ª×§! ×”×“×‘×§ ××•×ª×• ×‘×ª×•×š Stremio');
                } catch (err) {
                    showToast('âŒ ×©×’×™××” ×‘×”×¢×ª×§×”. × ×¡×” ×©×•×‘');
                }
                document.body.removeChild(textArea);
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
```
