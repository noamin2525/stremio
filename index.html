<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0b0b0e">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>住 住专 - 专 住专 Premium v5.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 25%, #16213e 50%, #0f172a 75%, #0c0c0f 100%);
            color: #f1f5f9;
            min-height: 100vh;
            min-height: calc(var(--vh, 1vh) * 100);
            position: relative;
            overflow-x: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 400;
            line-height: 1.6;
            backdrop-filter: blur(10px);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Animated gradient blobs background */
        body::before,
        body::after {
            content: '';
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
            animation: float 20s infinite ease-in-out;
            transition: opacity 0.5s ease;
        }

        body::before {
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            top: -200px;
            right: -200px;
            animation: float 25s infinite ease-in-out;
        }

        body::after {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            bottom: -150px;
            left: -150px;
            animation: float 30s infinite ease-in-out reverse;
        }


        /* Floating particles animation */
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
            opacity: 0.6;
            animation: float-particle 20s infinite linear;
        }

        .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
        .particle:nth-child(2) { left: 20%; animation-delay: 2s; }
        .particle:nth-child(3) { left: 30%; animation-delay: 4s; }
        .particle:nth-child(4) { left: 40%; animation-delay: 6s; }
        .particle:nth-child(5) { left: 50%; animation-delay: 8s; }
        .particle:nth-child(6) { left: 60%; animation-delay: 10s; }
        .particle:nth-child(7) { left: 70%; animation-delay: 12s; }
        .particle:nth-child(8) { left: 80%; animation-delay: 14s; }
        .particle:nth-child(9) { left: 90%; animation-delay: 16s; }

        @keyframes float-particle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, -50px) scale(1.1); }
            50% { transform: translate(-30px, 30px) scale(0.9); }
            75% { transform: translate(30px, 50px) scale(1.05); }
        }

        .container {
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(24px) saturate(200%);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4), 
                        0 1px 3px rgba(99, 102, 241, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            padding: 0.75rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
        }

        .logo-text {
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.025em;
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-input {
            width: 100%;
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.8), rgba(30, 41, 59, 0.6));
            border: 2px solid transparent;
            border-radius: 9999px;
            padding: 0.75rem 3rem;
            color: #f3f4f6;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            backdrop-filter: blur(10px);
        }

        .search-input::before {
            content: '';
            position: absolute;
            inset: 0;
            padding: 2px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899, #3b82f6);
            border-radius: inherit;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.4s;
        }

        .search-input:focus {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4),
                        0 0 60px rgba(236, 72, 153, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .search-input:focus::before {
            opacity: 1;
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            background: rgba(148, 163, 184, 0.1);
            border: 1px solid rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            padding: 0.75rem 1.25rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.875rem;
            letter-spacing: 0.025em;
        }

        .nav-btn:hover {
            background: rgba(148, 163, 184, 0.2);
            transform: translateY(-1px);
            border-color: rgba(148, 163, 184, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-color: rgba(99, 102, 241, 0.5);
            color: white;
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
        }

        .content-section {
            padding: 2rem 0;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #f1f5f9;
            letter-spacing: -0.05em;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .section-title::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 32px;
            border-radius: 9999px;
            background: linear-gradient(180deg, #6366f1, #8b5cf6, #ec4899);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5), 
                        0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        /* Fade-in animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-card {
            animation: fadeInUp 0.6s ease-out backwards;
        }

        .content-card:nth-child(1) { animation-delay: 0.05s; }
        .content-card:nth-child(2) { animation-delay: 0.1s; }
        .content-card:nth-child(3) { animation-delay: 0.15s; }
        .content-card:nth-child(4) { animation-delay: 0.2s; }
        .content-card:nth-child(5) { animation-delay: 0.25s; }
        .content-card:nth-child(6) { animation-delay: 0.3s; }
        .content-card:nth-child(7) { animation-delay: 0.35s; }
        .content-card:nth-child(8) { animation-delay: 0.4s; }
        .content-card:nth-child(9) { animation-delay: 0.45s; }
        .content-card:nth-child(10) { animation-delay: 0.5s; }

        .content-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 1.5rem;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            border: 1px solid rgba(99, 102, 241, 0.2);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 
                        0 4px 16px rgba(99, 102, 241, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .content-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 1rem;
            padding: 1px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(59, 130, 246, 0.3));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.4s;
        }

        .content-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 32px 64px -12px rgba(99, 102, 241, 0.3), 
                        0 20px 40px -20px rgba(139, 92, 246, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .content-card:hover::before {
            opacity: 1;
        }

        /* Modern magnetic cursor effect for cards */
        .content-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .content-card:hover {
            transform: translateY(-16px) scale(1.05) rotateX(3deg) rotateY(3deg);
            box-shadow: 0 48px 96px -24px rgba(99, 102, 241, 0.4), 
                        0 32px 64px -32px rgba(139, 92, 246, 0.3),
                        0 16px 32px rgba(236, 72, 153, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: rgba(99, 102, 241, 0.4);
        }

        /* Magnetic effect for mouse movement */
        .content-card {
            position: relative;
            overflow: hidden;
        }

        .content-card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1;
        }

        .content-card:hover::after {
            width: 300px;
            height: 300px;
        }

        .card-image-container {
            position: relative;
            aspect-ratio: 2/3;
            overflow: hidden;
            background: #0b0c0f;
        }

        .badge {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 6px;
        }

        .badge-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            background: rgba(17, 24, 39, 0.7);
            color: #f3f4f6;
            border: 1px solid rgba(148, 163, 184, 0.18);
            backdrop-filter: blur(6px);
        }

        .badge-item .dot {
            width: 6px;
            height: 6px;
            border-radius: 9999px;
            background: #f59e0b; /* rating accent */
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .content-card:hover .card-image {
            transform: scale(1.1);
        }


        /* Modern ripple effect for buttons */
        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .ripple:active::after {
            width: 200px;
            height: 200px;
        }

        /* Add ripple class to buttons */
        .nav-btn, .addon-btn, .watch-btn {
            position: relative;
            overflow: hidden;
        }

        .watch-btn:hover {
            transform: translateY(-3px) scale(1.08);
            box-shadow: 0 20px 48px rgba(99, 102, 241, 0.5), 
                        0 8px 24px rgba(139, 92, 246, 0.4),
                        0 4px 12px rgba(236, 72, 153, 0.3);
        }

        .watch-btn:active {
            transform: translateY(0) scale(0.98);
        }

        .card-info {
            padding: 1rem;
            background: linear-gradient(to top, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.7));
        }

        .card-title {
            font-weight: 700;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 0.5rem;
            color: #f1f5f9;
            line-height: 1.4;
            letter-spacing: -0.01em;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .skeleton {
            position: relative;
            overflow: hidden;
        }

        .skeleton-card {
            background: #151720;
            border-radius: 1rem;
            overflow: hidden;
        }

        .skeleton-image {
            aspect-ratio: 2/3;
            background: #1f2430;
        }

        .skeleton-text {
            height: 1rem;
            background: #1f2430;
            border-radius: 0.25rem;
            margin: 0.75rem;
        }

        .skeleton::after {
            content: '';
            position: absolute;
            inset: 0;
            transform: translateX(-100%);
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Modern pulse animation for loading */
        @keyframes pulse-modern {
            0%, 100% { 
                opacity: 0.4;
                transform: scale(1);
            }
            50% { 
                opacity: 0.8;
                transform: scale(1.02);
            }
        }

        .skeleton-card {
            animation: pulse-modern 2s ease-in-out infinite;
        }

        /* Modern loading spinner */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(99, 102, 241, 0.1);
            border-top: 3px solid #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modern Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 9999;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #ec4899, #3b82f6);
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg,
                rgba(255, 255, 255, 0.2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.2) 75%,
                transparent 75%,
                transparent
            );
            background-size: 50px 50px;
            animation: move 2s linear infinite;
        }

        @keyframes move {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .search-results {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: #0f1115;
            border: 1px solid rgba(148, 163, 184, 0.12);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
            max-height: 400px;
            overflow-y: auto;
            z-index: 50;
        }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.08);
            cursor: pointer;
            transition: background 0.3s;
        }

        .search-result-item:hover {
            background: rgba(24, 24, 27, 0.7);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-image {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 0.5rem;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .search-result-meta {
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .addon-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 1.5rem;
            padding: 2rem;
            border: 1px solid rgba(99, 102, 241, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 
                        0 4px 16px rgba(99, 102, 241, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .addon-card:hover {
            border-color: rgba(99, 102, 241, 0.4);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 48px 96px -24px rgba(99, 102, 241, 0.3), 
                        0 32px 64px -32px rgba(139, 92, 246, 0.2),
                        0 16px 32px rgba(236, 72, 153, 0.1),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .addon-name {
            font-size: 1.375rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: #f1f5f9;
            letter-spacing: -0.03em;
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .addon-description {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .addon-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .addon-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 0.875rem 1.5rem;
            border-radius: 1rem;
            cursor: pointer;
            flex: 1;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
            font-weight: 600;
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4), 
                        0 4px 16px rgba(139, 92, 246, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            letter-spacing: 0.025em;
            backdrop-filter: blur(10px);
        }

        .addon-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 20px 48px rgba(99, 102, 241, 0.5), 
                        0 8px 24px rgba(139, 92, 246, 0.4),
                        0 4px 12px rgba(236, 72, 153, 0.3);
        }

        .addon-btn.copy-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
        }

        .addon-btn.copy-btn:hover {
            box-shadow: 0 12px 32px rgba(59, 130, 246, 0.4);
        }

        /* From Uiverse.io by Creatlydev - addon action buttons */
        .button {
            line-height: 1;
            background-color: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.35em;
            padding: 0.75em 1em;
            padding-right: 1.25em;
            color: #fff;
            border: 1px solid transparent;
            font-weight: 700;
            border-radius: 2em;
            font-size: 1rem;
            box-shadow: 0 0.7em 1.5em -0.5em hsla(249, 62%, 51%, 0.745);
            transition: transform 0.3s;
            background: linear-gradient(
                90deg,
                rgba(77, 54, 208, 1) 0%,
                rgba(132, 116, 254, 1) 100%
            );
        }

        .button__icon {
            width: 1.5em;
            height: 1.5em;
        }

        .button:hover {
            border-color: #f4f5f2;
        }

        .button:active {
            transform: scale(0.98);
            box-shadow: 0 0.5em 1.5em -0.5em hsla(249, 62%, 51%, 0.745);
        }

        /* Telegram join button (scoped) */
        .addons-footer {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        .tg-join-btn {
            font-family: inherit;
            font-size: 18px;
            background: linear-gradient(to bottom, #4dc7d9 0%, #66a6ff 100%);
            color: white;
            padding: 0.8em 1.2em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            border-radius: 25px;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            text-decoration: none;
        }

        .tg-join-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
        }

        .tg-join-btn:active {
            transform: scale(0.95);
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
        }

        .tg-join-btn span {
            display: block;
            margin-left: 0.4em;
            transition: all 0.3s;
        }

        .tg-join-btn svg {
            width: 18px;
            height: 18px;
            fill: white;
            transition: all 0.3s;
        }

        .tg-join-btn .tg-svg-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            margin-right: 0.5em;
            transition: all 0.3s;
        }

        .tg-join-btn:hover .tg-svg-wrapper {
            background-color: rgba(255, 255, 255, 0.5);
        }

        .tg-join-btn:hover svg {
            transform: rotate(45deg);
        }

        /* Glassmorphism info banner */
        .info-banner {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.15));
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(139, 92, 246, 0.2),
                        inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .info-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.8), transparent);
            animation: shimmer 3s infinite;
        }

        .info-banner-icon {
            font-size: 2rem;
            flex-shrink: 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-banner-content {
            flex: 1;
        }

        .info-banner-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
            background: linear-gradient(135deg, #93c5fd, #d8b4fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .info-banner-text {
            font-size: 0.875rem;
            color: #cbd5e1;
            line-height: 1.6;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(34, 197, 94, 0.95);
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            z-index: 10000;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                padding: 0.5rem;
            }

            .search-container {
                order: 3;
                width: 100%;
                max-width: 100%;
                margin-top: 0.5rem;
            }

            .search-input {
                font-size: 16px; /* Prevents zoom on iOS */
                padding: 0.75rem 1rem;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 0.75rem;
                padding: 0 0.5rem;
            }

            .card-title {
                font-size: 0.8rem;
                line-height: 1.2;
            }

            .card-meta {
                font-size: 0.7rem;
            }

            .section-title {
                font-size: 1.5rem;
                margin-bottom: 1rem;
                padding: 0 0.5rem;
            }

            .nav-btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.9rem;
            }

            .logo-text {
                font-size: 1.2rem;
            }

            .addons-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 0 0.5rem;
            }

            .addon-card {
                padding: 1rem;
            }

            .addon-name {
                font-size: 1rem;
            }

            .addon-description {
                font-size: 0.85rem;
            }

            .button {
                padding: 0.6rem 0.8rem;
                font-size: 0.85rem;
            }

            .tg-join-btn {
                padding: 0.7rem 1rem;
                font-size: 16px;
            }

            .info-banner {
                margin: 1rem 0.5rem;
                padding: 1rem;
                font-size: 0.9rem;
            }

            .badge {
                top: 0.5rem;
                right: 0.5rem;
            }

            .badge-item {
                font-size: 0.7rem;
                padding: 0.2rem 0.4rem;
            }

            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 3rem;
                height: 3rem;
            }
        }

        /* Extra small mobile devices */
        @media (max-width: 480px) {
            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 0.5rem;
            }

            .card-title {
                font-size: 0.75rem;
            }

            .card-meta {
                font-size: 0.65rem;
            }

            .header-content {
                padding: 0.75rem 0.5rem;
            }

            .logo-text {
                font-size: 1.1rem;
            }

            .nav-btn {
                padding: 0.4rem 0.6rem;
                font-size: 0.8rem;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .search-input {
                padding: 0.6rem 0.8rem;
            }
        }

        /* Landscape mobile orientation */
        @media (max-width: 768px) and (orientation: landscape) {
            .modal-content {
                max-height: 90vh;
            }

            .modal-body {
                flex-direction: row;
                align-items: flex-start;
            }

            .modal-poster {
                width: 150px;
                max-width: 150px;
                margin: 0 1rem 0 0;
            }

            .modal-info {
                text-align: right;
                flex: 1;
            }
        }

        /* Touch-friendly interactions */
        @media (hover: none) and (pointer: coarse) {
            .content-card {
                cursor: pointer;
            }

            .content-card:active {
                transform: scale(0.98);
            }

            .button:active {
                transform: scale(0.95);
            }

            .nav-btn:active {
                transform: scale(0.95);
            }

            .modal-close:active {
                transform: scale(0.9);
            }

            .fab:active {
                transform: scale(0.9);
            }
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.1) rotate(180deg);
            box-shadow: 0 12px 35px rgba(139, 92, 246, 0.6);
        }

        .fab:active {
            transform: scale(0.95);
        }


        /* Modern scroll indicators */
        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(99, 102, 241, 0.1);
            z-index: 9999;
        }

        .scroll-progress {
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899);
            width: 0%;
            transition: width 0.1s ease;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 900px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(99, 102, 241, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 
                        0 8px 32px rgba(99, 102, 241, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
            position: relative;
            margin: 0 auto;
        }

        .modal-overlay.show .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .modal-close {
            background: rgba(99, 102, 241, 0.2);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: #f1f5f9;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .modal-close:hover {
            background: rgba(99, 102, 241, 0.3);
            transform: scale(1.1);
        }

        .modal-body {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            align-items: start;
        }

        .modal-poster {
            width: 100%;
            border-radius: 1rem;
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
        }

        .modal-info h2 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: #f1f5f9;
            letter-spacing: -0.025em;
        }

        .modal-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .modal-meta-item {
            background: rgba(99, 102, 241, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            color: #cbd5e1;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        .modal-description {
            color: #94a3b8;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .modal-cast {
            margin-bottom: 1.5rem;
        }

        .modal-cast h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: #f1f5f9;
        }

        .modal-cast-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .modal-cast-item {
            background: rgba(139, 92, 246, 0.2);
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            color: #e2e8f0;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal-watch-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 1rem 2rem;
            border-radius: 1rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4), 
                        0 4px 16px rgba(139, 92, 246, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal-watch-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 20px 48px rgba(99, 102, 241, 0.5), 
                        0 8px 24px rgba(139, 92, 246, 0.4),
                        0 4px 12px rgba(236, 72, 153, 0.3);
        }

        /* Responsive Modal */
        @media (max-width: 768px) {
            .modal-body {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 0.5rem;
                width: calc(100% - 1rem);
                max-height: 95vh;
                border-radius: 1rem;
            }
            
            .modal-info h2 {
                font-size: 1.5rem;
            }

            .modal-watch-btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                width: 100%;
            }

            .modal-description {
                font-size: 0.9rem;
            }

            .modal-cast-list {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 0.5rem;
            }

            .modal-cast-item {
                font-size: 0.7rem;
            }
        }

        /* Custom dark scrollbars */
        *::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        *::-webkit-scrollbar-track {
            background: rgba(15, 17, 21, 0.5);
            border-radius: 10px;
        }
        *::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #6366f1, #8b5cf6);
            border-radius: 10px;
            border: 2px solid rgba(15, 17, 21, 0.5);
            transition: all 0.3s ease;
        }
        *::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #8b5cf6, #ec4899);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
                            <line x1="7" y1="2" x2="7" y2="22"></line>
                            <line x1="17" y1="2" x2="17" y2="22"></line>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                        </svg>
                    </div>
                    <span class="logo-text">住 住专</span>
                </div>

                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="驻砖 住专, 住专转, 砖拽..."
                        id="searchInput"
                    >
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <div id="searchResults" class="search-results" style="display: none;"></div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn active" data-section="home">转</button>
                    <button class="nav-btn" data-section="movies">住专</button>
                    <button class="nav-btn" data-section="tv">住专转</button>
                    <button class="nav-btn" data-section="addons">转住驻</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div id="homeSection" class="content-section">
            <div class="section-title"> 住专 驻驻专</div>
            <div id="moviesGrid" class="content-grid"></div>

            <div class="section-title" style="margin-top: 3rem;"> 住专转 驻驻专转</div>
            <div id="tvGrid" class="content-grid"></div>
        </div>

        <div id="moviesSection" class="content-section" style="display: none;">
            <div class="section-title">  住专</div>
            <div id="allMoviesGrid" class="content-grid"></div>
        </div>

        <div id="tvSection" class="content-section" style="display: none;">
            <div class="section-title">  住专转</div>
            <div id="allTvGrid" class="content-grid"></div>
        </div>

        <div id="addonsSection" class="content-section" style="display: none;">
            <div class="section-title"> 转住驻 Stremio</div>
            <div class="info-banner">
                <div class="info-banner-icon"></div>
                <div class="info-banner-content">
                    <p class="info-banner-title">专转 转拽</p>
                    <p class="info-banner-text">
                        1. 驻转 转 Stremio 拽<br>
                        2. 抓 注 "转拽"  "注转拽 拽砖专" 拽 转 Stremio 驻砖<br>
                        3.    注 - 注转拽 转 拽砖专 转
                    </p>
                </div>
            </div>
            <div id="addonsGrid" class="addons-grid"></div>
            <div class="addons-footer">
                <a class="tg-join-btn" href="https://t.me/coolstaffil25" target="_blank" rel="noopener noreferrer">
                    <div class="tg-svg-wrapper-outer">
                        <div class="tg-svg-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path fill="currentColor" d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"></path>
                            </svg>
                        </div>
                    </div>
                    <span>爪专驻转 拽爪转 专</span>
                </a>
            </div>
        </div>
    </main>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-progress" id="scrollProgress"></div>
    </div>

    <!-- Floating Particles -->
    <div class="floating-particles" id="floatingParticles"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="movieModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <img class="modal-poster" id="modalPoster" src="" alt="">
                <div class="modal-info">
                    <h2 id="modalTitle"></h2>
                    <div class="modal-meta" id="modalMeta"></div>
                    <div class="modal-description" id="modalDescription"></div>
                    <div class="modal-cast">
                        <h3>砖拽</h3>
                        <div class="modal-cast-list" id="modalCast"></div>
                    </div>
                    <div class="modal-actions">
                        <a class="modal-watch-btn" id="modalWatchBtn" href="#" target="_blank">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="5,3 19,12 5,21"></polygon>
                            </svg>
                            爪驻 -Stremio
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="scrollToTop()" title="专 注">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19V5M5 12l7-7 7 7"/>
        </svg>
    </button>

    <script>
        const TMDB_API_KEY = '93f0d2ee2e3e60d061d14d91cbb47b46';
        const TMDB_BASE_URL = 'https://api.themoviedb.org/3';

        const ADDONS = [
            {
                name: 'Torrentio+ed',
                url: 'stremio://torrentio.strem.fun/easydebrid=n3cgfuzhg9ptzbss/manifest.json',
                description: '住专 专 转拽 注 专爪 砖 EasyDebrid'
            },
            {
                name: 'Wizdom Subtitles',
                url: 'stremio://4b139a4b7f94-wizdom-stremio-v2.baby-beamup.club/manifest.json',
                description: '转转 注专转 专 '
            },
            {
                name: 'Ktuvit Subtitles',
                url: 'stremio://4b139a4b7f94-ktuvit-stremio.baby-beamup.club/manifest.json',
                description: '转转 注专转 专 转转'
            },
            {
                name: 'Movie Release Dates',
                url: 'stremio://stremio7rd-movies-online-dates.vercel.app/manifest.json',
                description: '注拽 专 转专 爪 砖 住专 砖'
            },
            {
                name: 'TMDB Hebrew Posters',
                url: 'stremio://94c8cb9f702d-tmdb-addon.baby-beamup.club/N4IgNghgdg5grhGBTEAuEALJBaAkgGRABoQBnAFwCckIBbAS1jQG0BdEgYwnIjAHsYpFqHoATNCHK1RAIwB05PgAdikgJ5KU6WnwBu9FCSh0tIAArK4kSqtIY+Ad1xQAEn1paqcJAF8iI8XQpWQVlVXINU1IkSgMhIxMJCyUrCBsSO0dnNw80L19-EDEJYPk1GnT1TQkdfUMQY1z0AE0K23snV3dPSm8-AJLpMraSCOr0aNikeIbElpGyDuzuvN6CgaChuUhYBGRwyJq9A1VG03xoeER6zM6cnr7C4s2Qnav90cOJmLjTuZALrtru0sl0mvl+kVApItlQkFBRIwYAdxiBaicEk0QAAVagIpEgu4rVAQp7Q0oKPGIpifVGTX6Y0y4+HU5EZJZgh6+dggLgUADCfDgUHIaAArD4gA/manifest.json',
                description: '驻住专 注专 驻砖 转'
            },
            {
                name: '注专爪  转 砖专',
                url: 'stremio://youriptv.hayd.uk/eyJ1c2VybmFtZSI6InN0cmVtaW9lZGlsMjUiLCJwYXNzd29yZCI6IlNzMjAyNSIsIkJhc2VVUkwiOiJodHRwczovL3h0cmVhbS1pZS5jYyIsInRpbWV6b25lIjoiVVRDIn0/manifest.json',
                description: ' 注专爪  砖专 爪驻 , 住专转 砖专转, 转  -VOD'
            }
        ];

        let searchTimeout;

        // Mobile detection and optimization
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                   window.innerWidth <= 768;
        }

        // Touch event optimization
        function optimizeForTouch() {
            if (isMobile()) {
                // Add touch-friendly classes
                document.body.classList.add('mobile-device');
                
                // Optimize scroll behavior
                document.documentElement.style.scrollBehavior = 'smooth';
                
                // Prevent zoom on input focus
                const inputs = document.querySelectorAll('input[type="text"], input[type="search"]');
                inputs.forEach(input => {
                    input.addEventListener('focus', () => {
                        if (window.innerWidth < 768) {
                            input.style.fontSize = '16px';
                        }
                    });
                });
                
                // Add swipe gestures for modal
                let startX = 0;
                let startY = 0;
                
                document.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                });
                
                document.addEventListener('touchend', (e) => {
                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    const diffX = startX - endX;
                    const diffY = startY - endY;
                    
                    // Swipe down to close modal
                    if (Math.abs(diffY) > Math.abs(diffX) && diffY > 50) {
                        const modal = document.getElementById('movieModal');
                        if (modal && modal.classList.contains('show')) {
                            closeModal();
                        }
                    }
                });
            }
        }

        // Viewport height fix for mobile browsers
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded');
            fetchPopularContent();
            setupEventListeners();
            renderAddons();
            createFloatingParticles();
            optimizeForTouch();
            setViewportHeight();
        });

        // Update viewport height on resize
        window.addEventListener('resize', () => {
            setViewportHeight();
        });

        // Update viewport height on orientation change
        window.addEventListener('orientationchange', () => {
            setTimeout(setViewportHeight, 100);
        });

        function setupEventListeners() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    switchSection(e.target.dataset.section);
                });
            });

            document.getElementById('searchInput').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => handleSearch(e.target.value), 300);
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    document.getElementById('searchResults').style.display = 'none';
                }
            });
        }

        function switchSection(section) {
            document.querySelectorAll('.content-section').forEach(s => s.style.display = 'none');
            
            switch(section) {
                case 'home':
                    document.getElementById('homeSection').style.display = 'block';
                    break;
                case 'movies':
                    document.getElementById('moviesSection').style.display = 'block';
                    fetchAllMovies();
                    break;
                case 'tv':
                    document.getElementById('tvSection').style.display = 'block';
                    fetchAllTv();
                    break;
                case 'addons':
                    document.getElementById('addonsSection').style.display = 'block';
                    break;
            }
        }

        async function fetchPopularContent() {
            showProgress();
            showSkeletons('moviesGrid', 10);
            showSkeletons('tvGrid', 10);

            try {
                const [moviesRes, tvRes] = await Promise.all([
                    fetch(`${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`),
                    fetch(`${TMDB_BASE_URL}/tv/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`)
                ]);

                const moviesData = await moviesRes.json();
                const tvData = await tvRes.json();

                renderContent(moviesData.results.slice(0, 10), 'moviesGrid', 'movie');
                renderContent(tvData.results.slice(0, 10), 'tvGrid', 'tv');
            } catch (error) {
                console.error('Error fetching content:', error);
            }
        }

        async function fetchAllMovies() {
            const grid = document.getElementById('allMoviesGrid');
            if (grid.children.length > 0) return;

            showSkeletons('allMoviesGrid', 20);

            try {
                const res = await fetch(`${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`);
                const data = await res.json();
                renderContent(data.results, 'allMoviesGrid', 'movie');
            } catch (error) {
                console.error('Error fetching movies:', error);
            }
        }

        async function fetchAllTv() {
            const grid = document.getElementById('allTvGrid');
            if (grid.children.length > 0) return;

            showSkeletons('allTvGrid', 20);

            try {
                const res = await fetch(`${TMDB_BASE_URL}/tv/popular?api_key=${TMDB_API_KEY}&language=he-IL&page=1`);
                const data = await res.json();
                renderContent(data.results, 'allTvGrid', 'tv');
            } catch (error) {
                console.error('Error fetching TV shows:', error);
            }
        }

        async function handleSearch(query) {
            const resultsDiv = document.getElementById('searchResults');
            
            if (!query.trim()) {
                resultsDiv.style.display = 'none';
                return;
            }

            try {
                const res = await fetch(
                    `${TMDB_BASE_URL}/search/multi?api_key=${TMDB_API_KEY}&language=he-IL&query=${encodeURIComponent(query)}`
                );
                const data = await res.json();
                
                if (data.results.length > 0) {
                    renderSearchResults(data.results.slice(0, 8));
                    resultsDiv.style.display = 'block';
                } else {
                    resultsDiv.style.display = 'none';
                }
            } catch (error) {
                console.error('Search error:', error);
                resultsDiv.style.display = 'none';
            }
        }

        function renderSearchResults(results) {
            const resultsDiv = document.getElementById('searchResults');
            
            const filteredResults = results.filter(item => 
                item.media_type === 'movie' || item.media_type === 'tv'
            );
            
            resultsDiv.innerHTML = filteredResults.map(item => {
                const isMovie = item.media_type === 'movie';
                const title = isMovie ? item.title : item.name;
                const year = isMovie ? item.release_date : item.first_air_date;
                const posterPath = item.poster_path 
                    ? `https://image.tmdb.org/t/p/w200${item.poster_path}`
                    : 'https://placehold.co/50x75/1f2937/9ca3af?text=?';

                const type = isMovie ? 'movie' : 'tv';

                return `
                    <div class="search-result-item" onclick="openStremio('${item.id}', '${type}')">
                        <img src="${posterPath}" alt="${title}" class="search-result-image">
                        <div class="search-result-info">
                            <div class="search-result-title">${title}</div>
                            <div class="search-result-meta">
                                ${item.media_type === 'movie' ? ' 住专' : ' 住专'} 
                                ${year ? ' ' + new Date(year).getFullYear() : ''}
                                ${item.vote_average ? ' 猸 ' + item.vote_average.toFixed(1) : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderContent(items, gridId, type) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = items.map(item => {
                const isMovie = type === 'movie' || item.title;
                const title = isMovie ? item.title : item.name;
                const releaseDate = isMovie ? item.release_date : item.first_air_date;
                const posterPath = item.poster_path 
                    ? `https://image.tmdb.org/t/p/w500${item.poster_path}`
                    : 'https://placehold.co/500x750/1f2937/9ca3af?text=No+Image';

                const contentType = isMovie ? 'movie' : 'tv';
                const year = releaseDate ? new Date(releaseDate).getFullYear() : '';
                const rating = item.vote_average ? item.vote_average.toFixed(1) : '';

                return `
                    <div class="content-card">
                        <div class="card-image-container" onclick="openModal('${item.id}', '${contentType}')" style="cursor: pointer;">
                            <img src="${posterPath}" alt="${title}" class="card-image" loading="lazy">
                            <div class="badge">
                                ${rating ? `<div class="badge-item"><span class="dot"></span><span>猸 ${rating}</span></div>` : ''}
                                ${year ? `<div class="badge-item"><span class="dot" style="background:#60a5fa"></span><span>${year}</span></div>` : ''}
                            </div>
                        </div>
                        <div class="card-info">
                            <div class="card-title">${title}</div>
                            <div class="card-meta">
                                <span>猸 ${item.vote_average?.toFixed(1) || 'N/A'}</span>
                                ${releaseDate ? `<span></span><span>${new Date(releaseDate).getFullYear()}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showSkeletons(gridId, count) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = Array(count).fill(0).map(() => `
                <div class="skeleton-card skeleton">
                    <div class="skeleton-image"></div>
                    <div class="skeleton-text" style="width: 75%;"></div>
                    <div class="skeleton-text" style="width: 50%;"></div>
                </div>
            `).join('');
        }

        function renderAddons() {
            const grid = document.getElementById('addonsGrid');
            grid.innerHTML = ADDONS.map(addon => `
                <div class="addon-card">
                    <div class="addon-name">${addon.name}</div>
                    <div class="addon-description">${addon.description}</div>
                    <div class="addon-buttons">
                        <button class="button" onclick="installAddon('${addon.url}')">
                            <svg
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="1.5"
                                viewBox="0 0 24 24"
                                height="24"
                                width="24"
                                class="button__icon"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path fill="none" d="M0 0h24v24H0z" stroke="none"></path>
                                <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
                                <path d="M7 11l5 5l5 -5"></path>
                                <path d="M12 4l0 12"></path>
                            </svg>
                            <span class="button__text">转拽 转住祝</span>
                        </button>
                        <button class="button" onclick="copyAddonLink('${addon.url}')">
                            <svg
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="1.5"
                                viewBox="0 0 24 24"
                                height="24"
                                width="24"
                                class="button__icon"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path d="M0 0h24v24H0z" stroke="none" fill="none"></path>
                                <path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
                                <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
                            </svg>
                            <span class="button__text">注转拽 拽砖专</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        async function openStremio(tmdbId, type) {
            try {
                const loadingMsg = document.createElement('div');
                loadingMsg.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(168, 85, 247, 0.95);
                    color: white;
                    padding: 1rem 2rem;
                    border-radius: 1rem;
                    z-index: 9999;
                    font-weight: 600;
                    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
                `;
                loadingMsg.textContent = ' 注...';
                document.body.appendChild(loadingMsg);

                // Fetch IMDB ID for Stremio app
                const response = await fetch(`${TMDB_BASE_URL}/${type}/${tmdbId}/external_ids?api_key=${TMDB_API_KEY}`);
                const data = await response.json();
                const imdbId = data.imdb_id;

                document.body.removeChild(loadingMsg);

                if (imdbId) {
                    const stremioType = type === 'tv' ? 'series' : 'movie';
                    const stremioUrl = `stremio://detail/${stremioType}/${imdbId}`;
                    console.log('Opening Stremio app with IMDB ID:', stremioUrl);
                    // Open Stremio app
                    window.location.href = stremioUrl;
                } else {
                    // Fallback to TMDB ID
                    const stremioType = type === 'tv' ? 'series' : 'movie';
                    const stremioUrl = `stremio://detail/${stremioType}/${tmdbId}`;
                    console.log('Opening Stremio app with TMDB ID:', stremioUrl);
                    // Open Stremio app
                    window.location.href = stremioUrl;
                }

                document.getElementById('searchResults').style.display = 'none';
                document.getElementById('searchInput').value = '';

            } catch (error) {
                console.error('Error opening Stremio:', error);
                
                const loadingMsg = document.querySelector('[style*="position: fixed"]');
                if (loadingMsg && loadingMsg.textContent === ' 注...') {
                    loadingMsg.remove();
                }
                
                alert(' 专注 砖 注转 转.  住 砖.');
            }
        }

        function installAddon(url) {
            window.location.href = url;
            
            setTimeout(() => {
                if (!document.hidden) {
                    showToast(' 驻转 转 Stremio 拽 住 砖,  抓 注 "注转拽 拽砖专"');
                }
            }, 1000);
        }

        async function copyAddonLink(url) {
            try {
                await navigator.clipboard.writeText(url);
                showToast(' 拽砖专 注转拽! 拽 转 转 Stremio');
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = url;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast(' 拽砖专 注转拽! 拽 转 转 Stremio');
                } catch (err) {
                    showToast(' 砖 注转拽. 住 砖');
                }
                document.body.removeChild(textArea);
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide FAB and update scroll progress
        window.addEventListener('scroll', () => {
            const fab = document.querySelector('.fab');
            const scrollProgress = document.getElementById('scrollProgress');
            
            if (window.scrollY > 300) {
                fab.style.display = 'flex';
            } else {
                fab.style.display = 'none';
            }

            // Update scroll progress
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            scrollProgress.style.width = scrollPercent + '%';
        });

        // Progress bar functionality
        function updateProgressBar(percent) {
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percent + '%';
        }

        // Show progress during content loading
        function showProgress() {
            updateProgressBar(0);
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        updateProgressBar(0);
                    }, 500);
                }
                updateProgressBar(progress);
            }, 100);
        }

        // Create floating particles
        function createFloatingParticles() {
            const particlesContainer = document.getElementById('floatingParticles');
            for (let i = 0; i < 9; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particlesContainer.appendChild(particle);
            }
        }

        // Modal functionality
        function openModal(movieId, type = 'movie') {
            const modal = document.getElementById('movieModal');
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
            
            // Show loading state
            document.getElementById('modalTitle').textContent = '注...';
            document.getElementById('modalDescription').textContent = '注 驻专...';
            document.getElementById('modalCast').innerHTML = '<div class="modal-cast-item">注...</div>';
            
            // Fetch movie details
            fetchMovieDetails(movieId, type);
        }

        function closeModal() {
            const modal = document.getElementById('movieModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
        }

        async function fetchMovieDetails(movieId, type) {
            try {
                const endpoint = type === 'movie' ? 'movie' : 'tv';
                const response = await fetch(`${TMDB_BASE_URL}/${endpoint}/${movieId}?api_key=${TMDB_API_KEY}&language=he`);
                const data = await response.json();
                
                // Fetch cast details
                const castResponse = await fetch(`${TMDB_BASE_URL}/${endpoint}/${movieId}/credits?api_key=${TMDB_API_KEY}&language=he`);
                const castData = await castResponse.json();
                
                populateModal(data, castData, type);
            } catch (error) {
                console.error('Error fetching movie details:', error);
                document.getElementById('modalTitle').textContent = '砖 注转 驻专';
                document.getElementById('modalDescription').textContent = ' 转 注 转 驻专 住专/住专';
            }
        }

        function populateModal(movie, cast, type) {
            // Set poster
            const posterUrl = movie.poster_path 
                ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
                : 'https://via.placeholder.com/500x750/1e293b/94a3b8?text=No+Image';
            document.getElementById('modalPoster').src = posterUrl;
            
            // Set title
            document.getElementById('modalTitle').textContent = movie.title || movie.name;
            
            // Set meta information
            const metaContainer = document.getElementById('modalMeta');
            metaContainer.innerHTML = '';
            
            if (movie.release_date || movie.first_air_date) {
                const year = new Date(movie.release_date || movie.first_air_date).getFullYear();
                const metaItem = document.createElement('div');
                metaItem.className = 'modal-meta-item';
                metaItem.textContent = year;
                metaContainer.appendChild(metaItem);
            }
            
            if (movie.vote_average) {
                const ratingItem = document.createElement('div');
                ratingItem.className = 'modal-meta-item';
                ratingItem.innerHTML = `猸 ${movie.vote_average.toFixed(1)}`;
                metaContainer.appendChild(ratingItem);
            }
            
            if (movie.runtime || movie.episode_run_time?.[0]) {
                const runtimeItem = document.createElement('div');
                runtimeItem.className = 'modal-meta-item';
                const runtime = movie.runtime || movie.episode_run_time?.[0];
                runtimeItem.textContent = `${runtime} 拽转`;
                metaContainer.appendChild(runtimeItem);
            }
            
            if (movie.genres && movie.genres.length > 0) {
                const genreItem = document.createElement('div');
                genreItem.className = 'modal-meta-item';
                genreItem.textContent = movie.genres[0].name;
                metaContainer.appendChild(genreItem);
            }
            
            // Set description
            document.getElementById('modalDescription').textContent = movie.overview || ' 转专 ';
            
            // Set cast
            const castContainer = document.getElementById('modalCast');
            castContainer.innerHTML = '';
            
            if (cast.cast && cast.cast.length > 0) {
                cast.cast.slice(0, 8).forEach(actor => {
                    const castItem = document.createElement('div');
                    castItem.className = 'modal-cast-item';
                    castItem.textContent = actor.name;
                    castContainer.appendChild(castItem);
                });
            } else {
                const noCastItem = document.createElement('div');
                noCastItem.className = 'modal-cast-item';
                noCastItem.textContent = ' 注 注 砖拽';
                castContainer.appendChild(noCastItem);
            }
            
            // Set watch button
            const watchBtn = document.getElementById('modalWatchBtn');
            const title = movie.title || movie.name;
            const year = new Date(movie.release_date || movie.first_air_date).getFullYear();
            const tmdbId = movie.id;
            
            // Fetch IMDB ID for Stremio app
            fetch(`${TMDB_BASE_URL}/${type}/${tmdbId}/external_ids?api_key=${TMDB_API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const imdbId = data.imdb_id;
                    if (imdbId) {
                        const stremioType = type === 'tv' ? 'series' : 'movie';
                        const stremioUrl = `stremio://detail/${stremioType}/${imdbId}`;
                        watchBtn.href = stremioUrl;
                        watchBtn.onclick = function(e) {
                            e.preventDefault();
                            // Open Stremio app
                            window.location.href = stremioUrl;
                        };
                    } else {
                        // Fallback to TMDB ID if no IMDB ID
                        const stremioType = type === 'tv' ? 'series' : 'movie';
                        const stremioUrl = `stremio://detail/${stremioType}/${tmdbId}`;
                        watchBtn.href = stremioUrl;
                        watchBtn.onclick = function(e) {
                            e.preventDefault();
                            // Open Stremio app
                            window.location.href = stremioUrl;
                        };
                    }
                })
                .catch(error => {
                    console.error('Error fetching IMDB ID:', error);
                    // Fallback to TMDB ID
                    const stremioType = type === 'tv' ? 'series' : 'movie';
                    const stremioUrl = `stremio://detail/${stremioType}/${tmdbId}`;
                    watchBtn.href = stremioUrl;
                    watchBtn.onclick = function(e) {
                        e.preventDefault();
                        // Open Stremio app
                        window.location.href = stremioUrl;
                    };
                });
        }

        // Close modal when clicking outside
        document.getElementById('movieModal').addEventListener('click', (e) => {
            if (e.target.id === 'movieModal') {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });


    </script>
</body>
</html>
